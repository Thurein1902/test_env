<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Increase FX - Counter Trade Analysis</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            color: #1a1a1a;
            line-height: 1.6;
            letter-spacing: -0.01em;
            font-size: 1.09rem;
            text-rendering: optimizeLegibility;
            font-smooth: always;
            -webkit-font-smoothing: antialiased;
            background: #fcfcfd;
        }

        .nav {
            position: fixed;
            top: 0;
            width: 100%;
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.85);
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            z-index: 1000;
            padding: 16px 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 24px;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: -0.05em;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #007AFF, #34C759);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            cursor: pointer;
        }
        
        .nav-links {
            display: flex;
            gap: 40px;
            list-style: none;
        }

        .nav-links a {
            font-weight: 500;
            font-size: 1rem;
            letter-spacing: 0.01em;
            color: #272829;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #007AFF;
        }

        .hero {
            padding: 180px 24px 120px;
            text-align: center;
            background: linear-gradient(180deg, #ffffff 0%, #fcfcfd 100%);
        }

        .hero h1 {
            font-size: 4.5rem;
            font-weight: 800;
            line-height: 1.15;
            letter-spacing: -0.05em;
            color: #272829;
            margin-bottom: 0px;
        }

        .hero p {
            font-size: 1.5rem;
            font-weight: 400;
            color: #6e6e6e;
            line-height: 1.7;
            letter-spacing: 0.01em;
            max-width: 700px;
            margin: 0 auto 48px;
        }
        
        .section {
            padding: 120px 24px;
            max-width: 1200px;
            margin: 0 auto;
            background: #fff;
        }
        
        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            line-height: 1.2;
            letter-spacing: -0.03em;
            color: #272829;
            text-align: center;
            margin-bottom: 12px;
        }
        
        .summary-box {
            background: #fcfcfd;
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            margin: 0 auto 64px;
            max-width: 600px;
        }
        
        .summary-box h3 {
            font-size: 1.8rem;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 24px;
            letter-spacing: 0.02em;
        }
        
        .summary-box p {
            font-size: 2.5rem;
            font-weight: 500;
            color: #333333;
            margin-bottom: 16px;
            letter-spacing: 0.01em;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }

        .summary-box .summary-pair {
            font-size: 2.5rem;
            font-weight: 500;
            color: #333333;
        }

        .summary-box .summary-entry {
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: 0.05em;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .summary-box .summary-entry.up,
        .summary-box .summary-entry.down {
            background-image: linear-gradient(90deg, #007AFF, #34C759);
        }

        .summary-box .summary-entry.buy {
            background-image: linear-gradient(90deg, #34C759, #007AFF);
        }

        .summary-box .summary-entry.sell {
            background-image: linear-gradient(90deg, #FF3B30, #FF6B35);
        }

        .summary-box .summary-entry.neutral {
            background: none;
            -webkit-text-fill-color: #6e6e6e;
            color: #6e6e6e;
        }
        
        .summary-box .time-stamp {
            font-size: 1rem;
            color: #999;
            margin-top: 24px;
        }

        .section-subtitle {
            font-size: 1.15rem;
            font-weight: 400;
            color: #6e6e6e;
            line-height: 1.8;
            letter-spacing: 0.01em;
            text-align: center;
            margin-bottom: 72px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .pair-toggle-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            margin-bottom: 40px;
        }

        .pair-toggle-btn {
            background: #fff;
            color: #6e6e6e;
            font-size: 1.2rem;
            font-weight: 500;
            padding: 12px 24px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .pair-toggle-btn:hover {
            color: #007AFF;
            border-color: #007AFF;
        }

        .pair-toggle-btn.active {
            background: linear-gradient(90deg, #007AFF, #34C759);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 4px 10px rgba(0, 122, 255, 0.2);
        }

        .card {
            background: #fcfcfd;
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 20px;
            padding: 32px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.03);
        }

        .card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 122, 255, 0.2);
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.08);
        }

        .table-container {
            overflow-x: auto;
            border-radius: 20px;
            background: #fcfcfd;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1rem;
            background: #fcfcfd;
        }
        
        .data-table th {
            background: #fafafc;
            padding: 18px 16px;
            text-align: center;
            font-weight: 500;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            color: #888888;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .data-table td {
            padding: 18px 16px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            background: #fcfcfd;
            color: #666666;
            font-size: 1rem;
            text-align: center;
            font-weight: 400;
            letter-spacing: 0.01em;
            cursor: pointer;
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        .data-table tr:hover {
            background: #f9f9fb;
        }

        .pair-name {
            font-weight: 600;
            color: #1a1a1a !important;
            font-size: 1.05rem !important;
        }

        .highlight-top3 {
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            color: #34C759 !important;
        }

        .highlight-extreme-ranking {
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            color: #007AFF !important;
        }

        .highlight-rsi-extreme {
            font-weight: 700 !important;
            font-size: 1.1rem !important;
            color: #007AFF !important;
        }

        .entry-normal {
            color: #888888;
            font-weight: 400;
            padding: 8px 16px;
            font-size: 0.95rem;
            letter-spacing: 0.02em;
        }
        
        .entry-stay {
            color: #6e6e6e;
            font-weight: 400;
            padding: 8px 16px;
            border-radius: 12px;
            background: rgba(110, 110, 110, 0.1);
            font-size: 0.95rem;
            letter-spacing: 0.02em;
        }

        .entry-buy {
            background: rgba(52, 199, 89, 0.15);
            color: #34C759;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 0.95rem;
            letter-spacing: 0.02em;
        }

        .entry-sell {
            background: rgba(255, 59, 48, 0.15);
            color: #FF3B30;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 0.95rem;
            letter-spacing: 0.02em;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
            margin-top: 80px;
        }

        .feature {
            text-align: left;
            background: #fcfcfd;
            border: 1px solid rgba(0, 0, 0, 0.05);
            border-radius: 20px;
            padding: 40px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.03);
        }

        .feature:hover {
            transform: translateY(-8px);
            box-shadow: 0 16px 40px rgba(0, 0, 0, 0.08);
        }

        .feature h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1a1a1a;
            margin: 0 0 16px 0;
            text-align: center;
            letter-spacing: -0.01em;
        }

        .feature p {
            font-size: 1rem;
            font-weight: 400;
            color: #6e6e6e;
            line-height: 1.7;
            letter-spacing: 0.01em;
            margin: 0;
        }

        .footer {
            background: #fafafc;
            padding: 60px 24px;
            text-align: center;
            border-top: 1px solid rgba(0, 0, 0, 0.08);
        }

        .footer p {
            color: #aaaaaa;
            font-size: 0.85rem;
            line-height: 1.6;
            letter-spacing: 0.02em;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-bottom: 24px;
        }

        .footer-links a {
            color: #007AFF;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            letter-spacing: 0.02em;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .page {
            display: none;
            min-height: 80vh;
        }

        .page.active {
            display: block;
        }

        .page h2 {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 32px;
            background: linear-gradient(135deg, #1a1a1a 0%, #666666 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .page h3 {
            font-size: 1.5rem;
            font-weight: 500;
            margin: 32px 0 16px 0;
            color: #1a1a1a;
        }

        .page p {
            color: #666666;
            line-height: 1.8;
            margin-bottom: 16px;
            font-weight: 300;
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 3.2rem;
                line-height: 1.2;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .nav-links {
                display: none;
            }

            .data-table {
                font-size: 13px;
            }

            .data-table td {
                font-size: 12px;
                padding: 12px 8px;
            }

            .data-table th {
                font-size: 12px;
                padding: 12px 8px;
            }

            .features {
                grid-template-columns: 1fr;
            }

            .footer-links {
                flex-direction: column;
                gap: 16px;
            }

            .section-title {
                font-size: 2rem;
            }

            .pair-toggle-container {
                flex-direction: column;
                align-items: center;
                gap: 8px;
            }

            .pair-toggle-btn {
                width: 100%;
                max-width: 300px;
                border-radius: 12px !important;
            }
        }

        .scroll-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #007AFF, #34C759);
            transform-origin: left;
            transform: scaleX(0);
            z-index: 1001;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 20px;
            color: #ff4444;
            background: #ffe6e6;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .trigger-on {
            background: #34C759;
            color: #ffffff;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            letter-spacing: 0.01em;
            display: inline-block;
            text-align: center;
            min-width: 50px;
            border: none;
            white-space: nowrap;
        }

        .trigger-off {
            background: #e5e5e7;
            color: #8e8e93;
            font-weight: 500;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            letter-spacing: 0.01em;
            display: inline-block;
            text-align: center;
            min-width: 50px;
            border: none;
            white-space: nowrap;
        }

                /* Update the existing .chart-thumbnail class */
        .chart-thumbnail {
            width: 60px;     /* Reduce from 80px to match your image */
            height: 45px;    /* Reduce from 60px to maintain aspect ratio */
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #ddd;  /* Reduce border from 2px to 1px */
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            cursor: pointer;
        }

        /* Update hover effect to be more subtle */
        .chart-thumbnail:hover {
            border-color: #007AFF;
            transform: scale(1.02);  /* Reduce from 1.05 to 1.02 */
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);  /* Reduce shadow */
        }

        /* Update table cell padding for time column */
        .data-table td:first-child {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #333;
            width: 60px;     /* Reduce width */
            padding: 12px 8px;  /* Reduce padding */
            font-size: 0.9rem;  /* Slightly smaller font */
        }

        /* Update image cell padding */
        .data-table td:not(:first-child) {
            padding: 8px 4px;   /* Reduce padding around images */
        }

        /* Add modal improvements */
        .modal-content {
            margin: 3% auto;    /* Reduce top margin */
            display: block;
            max-width: 90%;     /* Slightly reduce max width */
            max-height: 85%;    /* Reduce max height */
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            animation: zoomIn 0.3s ease;
        }

        /* Make close button more visible */
        .close {
            position: absolute;
            top: 10px;
            right: 25px;
            color: #fff;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            z-index: 1001;
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        /* Add mobile responsiveness for thumbnails */
        @media (max-width: 768px) {
            .chart-thumbnail {
                width: 45px;
                height: 35px;
            }
            
            .data-table td:first-child {
                width: 45px;
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .data-table td:not(:first-child) {
                padding: 6px 2px;
            }
        }

        /* Win/Lose frame styles for chart thumbnails */
        .chart-thumbnail.win-frame {
            border: 3px solid #34C759;  /* Green border for wins */
            box-shadow: 0 0 8px rgba(52, 199, 89, 0.4);
        }

        .chart-thumbnail.lose-frame {
            border: 3px solid #FF3B30;  /* Red border for losses */
            box-shadow: 0 0 8px rgba(255, 59, 48, 0.4);
        }

        .chart-thumbnail.win-frame:hover {
            border-color: #30D158;  /* Brighter green on hover */
            box-shadow: 0 0 12px rgba(52, 199, 89, 0.6);
            transform: scale(1.05);
        }

        .chart-thumbnail.lose-frame:hover {
            border-color: #FF453A;  /* Brighter red on hover */
            box-shadow: 0 0 12px rgba(255, 59, 48, 0.6);
            transform: scale(1.05);
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .chart-thumbnail.win-frame,
            .chart-thumbnail.lose-frame {
                border-width: 2px;  /* Thinner borders on mobile */
            }
        }

    </style>
</head>
<body>
    <div class="scroll-indicator"></div>
    
    <nav class="nav">
        <div class="nav-container">
            <a href="#" onclick="showPage('home')" class="logo">Increase FX</a>
            <ul class="nav-links">
                <li><a href="#" onclick="showPage('home')">ãƒ›ãƒ¼ãƒ </a></li>
                <li><a href="#" onclick="showPage('results')">æ¤œè¨¼çµæœ</a></li>
                <li><a href="#" onclick="showPage('company')">é‹å–¶ä¼šç¤¾</a></li>
                <li><a href="#" onclick="showPage('disclaimer')">å…è²¬äº‹é …</a></li>
            </ul>
        </div>
    </nav>

    <div id="home" class="page active">
        <section class="hero">
            <h1>FXé€†å¼µã‚Šåˆ†æãƒ„ãƒ¼ãƒ«</h1>
            <p>ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰</p>
        </section>

        <section class="section" id="signals-section">
            <h2 class="section-title">æ³¨ç›®ã®é€šè²¨ãƒšã‚¢</h2>
            
            <div class="summary-box">
                <h3 id="summaryTitle">ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­...</h3>
                <p>
                    <span id="summaryPair" class="summary-pair"></span> 
                    <span id="summaryEntry" class="summary-entry"></span>
                </p>
                <p id="summaryTime" class="time-stamp"></p>
            </div>
            
            <p class="section-subtitle">ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€4æ™‚é–“è¶³ã®RSIã€CCIã€BB%Bã‚’åˆ†æã—ã€é€šè²¨å¼·å¼±ã‚’çµ„ã¿åˆã‚ã›ãŸç·åˆçš„ãªãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’ç®—å‡ºã—ã¾ã™ã€‚ã•ã‚‰ã«RSIã‚’åŠ å‘³ã—ã¦ã€ŒæœŸå¾…åº¦ã€ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å¼·å¼±ã®é †ä½ã¯ã€Œ1ã€ãŒæœ€å¼·é€šè²¨ã€ã€Œ8ã€ãŒæœ€å¼±é€šè²¨ã§ã™ã€‚ä¾‹ãˆã°ã€ŒUSDJPYãŒ1/8ã€ã®å ´åˆã¯USDãŒæœ€å¼·ãƒ»JPYãŒæœ€å¼±ã¨ãªã‚Šã€ã“ã®åˆ†æçµæœã§ã¯ã€Œä¸‹æ–¹å‘å‚¾å‘ï¼ˆå­¦ç¿’ä¸Šã®ä»®èª¬ä¾‹ï¼‰ã€ã¨ãªã‚Šã¾ã™ã€‚ã€Œä¸­ç«‹å‚¾å‘ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯æ–¹å‘æ€§ãŒãªã„ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ‡ãƒ¼ã‚¿ã¯ã‚ãã¾ã§å­¦ç¿’ãƒ»æ¤œè¨¼ã®ãŸã‚ã®åˆ†æçµæœã§ã‚ã‚Šã€æŠ•è³‡ã®æ¨è–¦ã‚„åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã”è‡ªèº«ã®åˆ¤æ–­ã§ã”åˆ©ç”¨ãã ã•ã„ã€‚</p>
            
            <div class="pair-toggle-container">
                <button class="pair-toggle-btn" id="btn-10pair" onclick="switchPairView('10pair')">10é€šè²¨ãƒšã‚¢åˆ†æçµæœ</button>
                <button class="pair-toggle-btn active" id="btn-28pair" onclick="switchPairView('28pair')">28é€šè²¨ãƒšã‚¢åˆ†æçµæœ</button>
            </div>
            
            <div class="card">
                <div id="loadingIndicator" class="loading">ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</div>
                <div id="errorIndicator" class="error" style="display: none;"></div>
                <div class="table-container" id="tableContainer" style="display: none;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>é€šè²¨ãƒšã‚¢</th>
                                <th>RSI(4H)</th>
                                <th>CCIå¼·å¼±</th>
                                <th>BB%Bå¼·å¼±</th>
                                <th>RSIå¼·å¼±</th>
                                <th>ç·åˆå¼·å¼±</th>
                                <th>æœŸå¾…åº¦</th>
                                <th>æ–¹å‘æ€§æŒ‡æ¨™ï¼ˆå­¦ç¿’ç”¨ï¼‰</th>
                                <th>ãƒˆãƒªã‚¬ãƒ¼</th>
                            </tr>
                        </thead>
                        <tbody id="dataTable">
                            </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">åˆ†æãƒ‡ãƒ¼ã‚¿æ´»ç”¨è¡“</h2>
            <p class="section-subtitle">ã“ã®åˆ†æãƒ‡ãƒ¼ã‚¿ã¯ã€FXå­¦ç¿’è€…ã®ãŸã‚ã®æ•™æã¨ã—ã¦ã”æ´»ç”¨ã„ãŸã ã‘ã¾ã™ã€‚å˜ä¸€ã®ãƒ„ãƒ¼ãƒ«ã«é ¼ã‚‹ã®ã§ã¯ãªãã€ä»–ã®ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šæ·±ã„ç›¸å ´ç†è§£ã«ã¤ãªãŒã‚Šã¾ã™ã€‚</p>
            
            <div class="features">
                <div class="feature">
                    <h3>ãƒãƒ£ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºèª</h3>
                    <p>â€»ä»¥ä¸‹ã¯å­¦ç¿’ãƒ»ç ”ç©¶ã®ãŸã‚ã®ä¸€èˆ¬çš„æ‰‹æ³•ã®ç´¹ä»‹ã§ã‚ã‚Šã€å£²è²·ã®æ¨è–¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>ä¸Šæ–¹å‘ã‚·ãƒŠãƒªã‚ªæ¤œè¨æ™‚ã¯ãƒ€ãƒ–ãƒ«ãƒœãƒˆãƒ ã€ä¸‹æ–¹å‘ã‚·ãƒŠãƒªã‚ªæ¤œè¨æ™‚ã¯ãƒ€ãƒ–ãƒ«ãƒˆãƒƒãƒ—ã®æœ‰ç„¡ãªã©ã€ãƒãƒ£ãƒ¼ãƒˆå½¢çŠ¶ã®æ•´åˆã‚’ç¢ºèªã™ã‚‹æ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p>
                    <p>åˆ†æãƒ‡ãƒ¼ã‚¿ã«å½¢çŠ¶ã®è£ä»˜ã‘ãŒé‡ãªã‚‹ã¨ã€å¤šè§’çš„ãªè¦‹æ–¹ã«ã¤ãªãŒã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                <div class="feature">
                    <h3>åè»¢å…†å€™ã®ç¢ºèª</h3>
                    <p>â€»ä»¥ä¸‹ã¯å­¦ç¿’ãƒ»ç ”ç©¶ã®ãŸã‚ã®ä¸€èˆ¬çš„æ‰‹æ³•ã®ç´¹ä»‹ã§ã‚ã‚Šã€å£²è²·ã®æ¨è–¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>RSIãŒä¸€æ™‚çš„ã«30æœªæº€ãƒ»70è¶…ã ã£ãŸå¾Œã€30ä»¥ä¸Šãƒ»70ä»¥ä¸‹ã¸å¾©å¸°ã—ã¦ã„ã‚‹æ–¹å‘æ€§ã€ç§»å‹•å¹³å‡ã®å‚¾ãéˆåŒ–ãŒè¦‹ã‚‰ã‚Œã‚‹ã‹ãªã©ã€åè»¢ã‚’ç¤ºå”†ã™ã‚‹ã‚µã‚¤ãƒ³ã‚’ææ–™ã¨ã—ã¦æ‰±ã†ä¾‹ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                <div class="feature">
                    <h3>åˆ†å‰²é…åˆ†ã®ä¾‹</h3>
                    <p>â€»ä»¥ä¸‹ã¯å­¦ç¿’ãƒ»ç ”ç©¶ã®ãŸã‚ã®ä¸€èˆ¬çš„æ‰‹æ³•ã®ç´¹ä»‹ã§ã‚ã‚Šã€å£²è²·ã®æ¨è–¦ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>ä¸€åº¦ã«å…¨é‡ã§ã¯ãªãã€è¤‡æ•°å›ã«åˆ†ã‘ã¦é…åˆ†ã™ã‚‹æ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚ä¾¡æ ¼å¤‰å‹•ã®å½±éŸ¿ã‚’å¹³æº–åŒ–ã™ã‚‹ç‹™ã„ã®ä¾‹ã§ã™ã€‚</p>
                </div>
            </div>
        </section>

        <section class="section">
            <h2 class="section-title">ã‚¨ã‚°ã‚¸ãƒƒãƒˆè¨­è¨ˆ</h2>
            <p class="section-subtitle">ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã ã‘ã§ãªãã€ã©ã“ã§å–å¼•ã‚’çµ‚ãˆã‚‹ã‹ï¼ˆã‚¨ã‚°ã‚¸ãƒƒãƒˆï¼‰ã‚‚é‡è¦ãªè¨­è¨ˆè¦ç´ ã§ã™ã€‚ã“ã“ã§ã¯ã€åˆ†æçµæœã‚’åŸºã«ã—ãŸã‚¨ã‚°ã‚¸ãƒƒãƒˆã®è€ƒãˆæ–¹ã‚’ã”ç´¹ä»‹ã—ã¾ã™ã€‚</p>
            <div class="features">
                <div class="feature">
                    <h3>ãƒãƒ£ãƒ¼ãƒˆã®ç¯€ç›®ã§ã®ã‚¯ãƒ­ãƒ¼ã‚ºä¾‹</h3>
                    <p>â€»æœ¬ãƒšãƒ¼ã‚¸ã¯æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>ã‚µãƒãƒ¼ãƒˆãƒ»ãƒ¬ã‚¸ã‚¹ã‚¿ãƒ³ã‚¹ã€ç›´è¿‘é«˜å€¤ãƒ»å®‰å€¤ã¨ã„ã£ãŸä¾¡æ ¼ç¯€ç›®ã«é”ã—ãŸéš›ã«ã€éƒ¨åˆ†ã¾ãŸã¯å…¨éƒ¨ã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã™ã‚‹ä¸€èˆ¬çš„ãªæ‰‹æ³•ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                <div class="feature">
                    <h3>ç›´è¿‘ã®é«˜å€¤ãƒ»å®‰å€¤ã‚’ç”¨ã„ãŸæå¤±é™å®šã®ä¾‹</h3>
                    <p>â€»æœ¬ãƒšãƒ¼ã‚¸ã¯æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>ç›´è¿‘ã®é«˜å€¤ãƒ»å®‰å€¤ã®å¤–å´ã«æå¤±é™å®šãƒ©ã‚¤ãƒ³ã‚’ç½®ãè¨­è¨ˆã¯ã€ãƒªã‚¹ã‚¯ã‚’å®šé‡åŒ–ã™ã‚‹ä¸€èˆ¬æ‰‹æ³•ã¨ã—ã¦çŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚</p>
                </div>
                <div class="feature">
                    <h3>ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³æ™‚ã®å¯¾å¿œ</h3>
                    <p>â€»æœ¬ãƒšãƒ¼ã‚¸ã¯æŠ•è³‡åŠ©è¨€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼ˆå‚è€ƒãƒ‡ãƒ¼ã‚¿ï¼‰ã€‚</p>
                    <p>é€†å¼µã‚Šç’°å¢ƒã§ã¯ã€è©•ä¾¡æãŒç™ºç”Ÿã—ã¦ã‹ã‚‰ä¾¡æ ¼ãŒå¾©å¸°ã™ã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã¾ã™ãŒã€ç²¾ç¥çš„è² è·ã‚„è³‡é‡‘ç®¡ç†ä¸Šã®ãƒªã‚¹ã‚¯ãŒå¤§ãããªã‚Šå¾—ã¾ã™ã€‚å„è‡ªã®ãƒªã‚¹ã‚¯è¨±å®¹åº¦ã«å¿œã˜ãŸæ…é‡ãªåˆ¤æ–­ãŒå‰æã§ã™ã€‚</p>
                </div>
            </div>
        </section>
    </div>

    <div id="company" class="page">
        <section class="section">
            <h2>é‹å–¶ä¼šç¤¾</h2>
            <h3>ä¼šç¤¾æ¦‚è¦</h3>
            <p>ä¼šç¤¾å: ã‚¤ãƒ³ã‚¯ãƒªãƒ¼ã‚ºæ ªå¼ä¼šç¤¾</p>
            <p>è¨­ç«‹: 2022å¹´12æœˆ2æ—¥</p>
            <p>è³‡æœ¬é‡‘: 1,000,000å††</p>
            <p>ä»£è¡¨è€…: ä¸­é‡ç”±ä»</p>
            <p>æ‰€åœ¨åœ°: å¤§é˜ªå¸‚ä¸­å¤®åŒºå—æ–°ç”ºï¼‘ä¸ç›®ï¼’âˆ’ï¼“</p>
            <p>é›»è©±: 06-6940-0330</p>
        </section>
    </div>

    <div id="disclaimer" class="page">
        <section class="section">
            <h2>å…è²¬äº‹é …</h2>
            
            <h3>æŠ•è³‡ãƒªã‚¹ã‚¯ã«ã¤ã„ã¦</h3>
            <p>FXå–å¼•ã¯é«˜ã„ãƒªã‚¹ã‚¯ã‚’ä¼´ã†æŠ•è³‡è¡Œç‚ºã§ã™ã€‚ãƒ¬ãƒãƒ¬ãƒƒã‚¸åŠ¹æœã«ã‚ˆã‚Šã€æŠ•è³‡å…ƒæœ¬ã‚’ä¸Šå›ã‚‹æå¤±ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚</p>
            
            <h3>æƒ…å ±ã®åˆ©ç”¨ã«ã¤ã„ã¦</h3>
            <p>æœ¬ã‚µã‚¤ãƒˆã§æä¾›ã•ã‚Œã‚‹æƒ…å ±ã¯ã€æŠ•è³‡ã®å‚è€ƒæƒ…å ±ã¨ã—ã¦æä¾›ã•ã‚Œã¦ãŠã‚Šã€æŠ•è³‡ã®æ¨è–¦ã‚„å‹§èª˜ã‚’ç›®çš„ã¨ã—ãŸã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æœ¬ã‚µã‚¤ãƒˆã®å†…å®¹ã¯æ•™è‚²ãƒ»ç ”ç©¶ç”¨ã®å‚è€ƒãƒ‡ãƒ¼ã‚¿ã§ã‚ã‚Šã€å®Ÿéš›ã®å–å¼•ã¸ã®ç›´æ¥åˆ©ç”¨ã¯æ¨è–¦ã„ãŸã—ã¾ã›ã‚“ã€‚</p>
            
            <h3>æŠ•è³‡åˆ¤æ–­ã®è²¬ä»»</h3>
            <p>ã™ã¹ã¦ã®æŠ•è³‡åˆ¤æ–­ã¯ã€åˆ©ç”¨è€…ã”è‡ªèº«ã®è²¬ä»»ã«ãŠã„ã¦è¡Œã£ã¦ãã ã•ã„ã€‚æœ¬ã‚µã‚¤ãƒˆã®æƒ…å ±ã‚’åˆ©ç”¨ã—ãŸçµæœç”Ÿã˜ã‚‹ã„ã‹ãªã‚‹æå¤±ã«ã¤ã„ã¦ã€å½“ã‚µã‚¤ãƒˆã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
            
            <h3>æƒ…å ±ã®æ­£ç¢ºæ€§ã«ã¤ã„ã¦</h3>
            <p>æœ¬ã‚µã‚¤ãƒˆã®æƒ…å ±ã¯æ­£ç¢ºæ€§ã‚’æœŸã—ã¦ãŠã‚Šã¾ã™ãŒã€å®Œå…¨æ€§ã‚„é©æ™‚æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚è¡¨ç¤ºã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¯é…å»¶ã‚„éå»ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å ´åˆãŒã‚ã‚Šã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®å–å¼•åˆ¤æ–­ã«åˆ©ç”¨ã§ãã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            
            <h3>ç¬¬ä¸‰è€…è²¬ä»»ã®å¦å®š</h3>
            <p>å½“ã‚µã‚¤ãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚ŒãŸå¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹ã‚„æ²è¼‰ãƒ‡ãƒ¼ã‚¿ã®å‡ºå…¸ã«ã¤ã„ã¦ã‚‚ã€ãã®æ­£ç¢ºæ€§ã‚„å®Œå…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            
            <h3>ãƒªã‚¹ã‚¯ç®¡ç†ã®é‡è¦æ€§</h3>
            <p>FXå–å¼•ã‚’è¡Œã†éš›ã¯ã€é©åˆ‡ãªãƒªã‚¹ã‚¯ç®¡ç†ã‚’è¡Œã„ã€ä½™è£•è³‡é‡‘ã®ç¯„å›²å†…ã§å–å¼•ã‚’è¡Œã†ã“ã¨ã‚’å¼·ãæ¨è–¦ã—ã¾ã™ã€‚</p>
        </section>
    </div>

    <div id="results" class="page">
        <section class="section">
            <h2>æ¤œè¨¼çµæœ</h2>
            <p class="section-subtitle">10æ—¥åˆ†ã®æ¤œè¨¼çµæœã§ã™ã€‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ã¦ã‹ã‚‰240æ™‚é–“åˆ†ã®ãƒãƒ£ãƒ¼ãƒˆã§ã™ã€‚å®Ÿéš›ã«ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ã¦ã‹ã‚‰ã€ã©ã®ã‚ˆã†ã«ä¾¡æ ¼ãŒæ¨ç§»ã—ãŸã‹ã‚’ã”ç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚é€†å¼µã‚Šã®ãƒˆãƒ¬ãƒ¼ãƒ‰ã®æœ‰åŠ¹æ€§ã«ã¤ã„ã¦ã”å‚è€ƒãã ã•ã„ã€‚</p>
            <div class="card">
                <div class="table-container">
                    <table class="data-table">
                        <thead>
                            <!-- Header will be generated by JavaScript -->
                        </thead>
                        <tbody>
                            <!-- Table body will be generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <div id="imageModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>

    <footer class="footer">
        <div class="footer-links">
            <a href="#" onclick="showPage('results')">æ¤œè¨¼çµæœ</a>
            <a href="#" onclick="showPage('company')">é‹å–¶ä¼šç¤¾</a>
            <a href="#" onclick="showPage('disclaimer')">å…è²¬äº‹é …</a>
        </div>
        <p>&copy; 2025 Increase FX. Counter trade analysis made accessible to everyone.</p>
    </footer>

    <script>

    // Global variables for forex data
    let forexData = null;
    let processedTableData = [];
    let refreshTimer;
    let currentDataSource = '28pair'; // Track current data source

    // Page switching functionality
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        document.getElementById(pageId).classList.add('active');
        window.scrollTo(0, 0);
    }

    // Switch between 10 and 28 pair views
    function switchPairView(pairType) {
        // Update button states
        document.querySelectorAll('.pair-toggle-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        document.getElementById(`btn-${pairType}`).classList.add('active');
        
        // Update current data source
        currentDataSource = pairType;
        
        // Load appropriate data
        loadForexData();
    }

    // Scroll indicator
    window.addEventListener('scroll', () => {
        const scrolled = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
        document.querySelector('.scroll-indicator').style.transform = `scaleX(${scrolled / 100})`;
    });

    // Load JSON data function
    async function loadForexData() {
        try {
            showLoading(true);
            
            // Determine which JSON file to load based on current view
            const fileName = `fx_signals_${currentDataSource}.json`;
            const response = await fetch(`./${fileName}?` + new Date().getTime());
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const data = await response.json();
            forexData = data.forexData;
            
            // Process and display the data
            processedTableData = processForexData(forexData);
            populateTable();
            generateSummary();
            showLoading(false);
            
            console.log(`Forex data loaded successfully from ${fileName}`);
            
        } catch (error) {
            console.error('Error loading forex data:', error);
            
            // Fallback to static data if JSON loading fails
            console.log('Loading fallback static data...');
            loadFallbackData();
        }
    }

    // Fallback to static data
    function loadFallbackData() {
        // Define 10 major pairs
        const majorPairs = ['USDJPY', 'EURUSD', 'GBPUSD', 'AUDUSD', 'EURJPY', 'GBPJPY', 'AUDJPY', 'EURGBP', 'EURAUD', 'GBPAUD'];
        
        const allFallbackData = [
            ['USDJPY', '1/7', '2/7', '1/8', '75', '1/7', '55%', 'Buy'],
            ['EURJPY', '4/7', '6/7', '4/8', '63', '4/7', '48%', 'Sell'],
            ['GBPJPY', '8/7', '8/7', '7/8', '49', '8/7', '34%', 'Buy'],
            ['AUDJPY', '3/7', '1/7', '3/8', '65', '2/7', '48%', 'Sell'],
            ['NZDJPY', '6/7', '4/7', '6/8', '59', '6/7', '46%', 'Buy'],
            ['CADJPY', '2/7', '3/7', '2/8', '66', '3/7', '72%', 'Sell'],
            ['CHFJPY', '5/7', '5/7', '5/8', '60', '5/7', '39%', 'Buy'],
            ['EURUSD', '4/1', '6/2', '4/1', '20', '4/1', '39%', 'Sell'],
            ['AUDUSD', '3/1', '1/2', '3/1', '47', '2/1', '54%', 'Buy'],
            ['GBPUSD', '8/1', '8/2', '7/1', '35', '8/1', '67%', 'Sell'],
            ['NZDUSD', '6/1', '4/2', '6/1', '43', '6/1', '47%', 'Buy'],
            ['USDCHF', '1/5', '2/5', '1/5', '58', '1/5', '36%', 'Sell'],
            ['USDCAD', '1/2', '2/3', '1/2', '56', '1/3', '36%', 'Buy'],
            ['EURGBP', '4/8', '6/8', '4/7', '65', '4/8', '39%', 'Sell'],
            ['EURAUD', '4/3', '6/1', '4/3', '47', '4/2', '34%', 'Buy'],
            ['EURCAD', '4/2', '6/3', '4/2', '44', '4/3', '39%', 'Sell'],
            ['EURCHF', '4/5', '6/5', '4/5', '51', '4/5', '36%', 'Buy'],
            ['EURNZD', '4/6', '6/4', '4/6', '54', '4/6', '31%', 'Sell'],
            ['GBPAUD', '8/3', '8/1', '7/3', '36', '8/2', '58%', 'Buy'],
            ['GBPCHF', '8/5', '8/5', '7/5', '42', '8/5', '39%', 'Sell'],
            ['GBPCAD', '8/2', '8/3', '7/2', '33', '8/3', '57%', 'Buy'],
            ['GBPNZD', '8/6', '8/4', '7/6', '42', '8/6', '39%', 'Sell'],
            ['AUDCAD', '3/2', '1/3', '3/2', '49', '2/3', '34%', 'Buy'],
            ['AUDCHF', '3/5', '1/5', '3/5', '53', '2/5', '31%', 'Sell'],
            ['AUDNZD', '3/6', '1/4', '3/6', '61', '2/6', '42%', 'Buy'],
            ['CADCHF', '2/5', '3/5', '2/5', '55', '3/5', '36%', 'Sell'],
            ['NZDCAD', '6/2', '4/3', '6/2', '43', '6/3', '42%', 'Buy'],
            ['NZDCHF', '6/5', '4/5', '6/5', '49', '6/5', '34%', 'Sell']
        ];

        // Filter data based on current view
        let fallbackData;
        if (currentDataSource === '10pair') {
            fallbackData = allFallbackData.filter(row => majorPairs.includes(row[0]));
        } else {
            fallbackData = allFallbackData;
        }

        processedTableData = fallbackData.map(row => ({
            pair: row[0],
            currencyStrength: row[1],
            cciStrength: row[2],
            bbPercent: row[3],
            rsiBreakout: parseInt(row[4]),
            overallRanking: row[5],
            confidence: parseInt(row[6].replace('%', '')),
            signal: row[7] || getEntrySignalFromRanking(row[5]),
            trigger: 'OFF', // Default fallback value
            triggerReason: 'NONE' // Default fallback value
        }));

        populateTable();
        generateSummary();
        showLoading(false);
        console.log(`Fallback static data loaded successfully for ${currentDataSource}`);
    }

    // Show/hide loading indicator
    function showLoading(show) {
        const loadingIndicator = document.getElementById('loadingIndicator');
        const tableContainer = document.getElementById('tableContainer');
        const errorIndicator = document.getElementById('errorIndicator');
        
        if (show) {
            loadingIndicator.style.display = 'block';
            tableContainer.style.display = 'none';
            errorIndicator.style.display = 'none';
        } else {
            loadingIndicator.style.display = 'none';
            tableContainer.style.display = 'block';
        }
    }

    function processForexData(data) {
        const processed = [];
        
        for (const [pairName, pairData] of Object.entries(data)) {
            processed.push({
                pair: pairName,
                currencyStrength: pairData.Currency_Strength_Rank_all_pair,
                cciStrength: pairData.CCI_Currency_Strength_Rank_all_pair,
                bbPercent: pairData.BB_percent_ranking,
                rsiBreakout: pairData.RSI_breakout,
                overallRanking: pairData.Overall_Ranking,
                confidence: pairData.Confidence,
                signal: pairData.Signal || getEntrySignalFromRanking(pairData.Overall_Ranking),
                trigger: pairData.TRIGGER || 'OFF',
                triggerReason: pairData.TRIGGER_REASON || 'NONE'
            });
        }
        
        return processed;
    }

    // Generate summary section
    function generateSummary() {
        const now = new Date();
        const hour = now.toLocaleTimeString('en-GB', { hour: '2-digit', hour12: false });
        const lastUpdatedTime = `${hour}:00`;

        const summaryTitle = document.getElementById('summaryTitle');
        const summaryPair = document.getElementById('summaryPair');
        const summaryEntry = document.getElementById('summaryEntry');
        const summaryTime = document.getElementById('summaryTime');
        
        // Find top confidence pair
        const topPair = processedTableData.slice().sort((a, b) => b.confidence - a.confidence)[0];

        if (topPair) {
            const entrySignal = topPair.signal;
            
            summaryTitle.textContent = `${lastUpdatedTime}ã®æœ€æœ‰åŠ›åˆ†æçµæœï¼ˆä»®èª¬ï¼‰`;
            summaryPair.textContent = topPair.pair;
            summaryEntry.textContent = entrySignal === 'Buy' ? 'ä¸Šæ–¹å‘å‚¾å‘' : 
                                    entrySignal === 'Sell' ? 'ä¸‹æ–¹å‘å‚¾å‘' : 'ä¸­ç«‹å‚¾å‘';
            summaryEntry.className = `summary-entry ${entrySignal === 'Buy' ? 'up' : entrySignal === 'Sell' ? 'down' : 'neutral'}`;
            summaryTime.textContent = `æœ€çµ‚æ›´æ–°: ${lastUpdatedTime} | æœŸå¾…åº¦: ${topPair.confidence}%`;
        }
    }
    function populateTable() {
        const tbody = document.getElementById('dataTable');
        tbody.innerHTML = ''; // Clear existing data
        
        const top3Confidence = getTop3ConfidenceWithMedals();
        const top3ConfidenceValues = Object.keys(top3Confidence).map(k => parseInt(k));
        
        // Sort by confidence descending
        // Sort by signal priority first (Buy/Sell before Hold), then by confidence descending, then by signal type
        const sortedData = processedTableData.slice().sort((a, b) => {
            // Define signal priority (lower number = higher priority)
            const getSignalPriority = (signal) => {
                if (signal === 'Buy' || signal === 'Sell') return 1;  // ä¸Šæ–¹å‘å‚¾å‘ and ä¸‹æ–¹å‘å‚¾å‘
                return 2;  // ä¸­ç«‹å‚¾å‘ (Hold/Stay)
            };
            
            // Define signal type priority for tie-breaking (when confidence is same)
            const getSignalTypePriority = (signal) => {
                if (signal === 'Sell') return 1;  // ä¸‹æ–¹å‘å‚¾å‘ first
                if (signal === 'Buy') return 2;   // ä¸Šæ–¹å‘å‚¾å‘ second
                return 3;  // ä¸­ç«‹å‚¾å‘ last
            };
            
            const priorityA = getSignalPriority(a.signal);
            const priorityB = getSignalPriority(b.signal);
            
            // First sort by signal priority (Buy/Sell vs Hold)
            if (priorityA !== priorityB) {
                return priorityA - priorityB;
            }
            
            // If same priority, sort by confidence descending
            if (a.confidence !== b.confidence) {
                return b.confidence - a.confidence;
            }
            
            // If same confidence, sort by signal type (Sell before Buy)
            return getSignalTypePriority(a.signal) - getSignalTypePriority(b.signal);
        });

        sortedData.forEach(row => {
            const tr = document.createElement('tr');
            const entrySignal = getDirectionFromSignal(row.signal);
            const isTop3 = top3ConfidenceValues.includes(row.confidence);
            
            // Only show medal and highlighting if signal is NOT "ä¸­ç«‹å‚¾å‘" (Stay)
            const isStaySignal = entrySignal === 'ä¸­ç«‹å‚¾å‘';
            const shouldShowMedal = (isTop3 && !isStaySignal);
            const medal = shouldShowMedal ? (top3Confidence[row.confidence.toString()] || '') : '';
            
            // Determine entry class based on signal type
            let entryClass = 'entry-normal';
            if (entrySignal === 'ä¸Šæ–¹å‘å‚¾å‘') {
                entryClass = 'entry-buy';
            } else if (entrySignal === 'ä¸‹æ–¹å‘å‚¾å‘') {
                entryClass = 'entry-sell';
            } else if (entrySignal === 'ä¸­ç«‹å‚¾å‘') {
                entryClass = 'entry-stay';
            }
            
            // Confidence styling: normal for Stay signals, highlighted for Buy/Sell
            const confidenceClass = (isTop3 && !isStaySignal) ? 'highlight-top3' : '';
            
            tr.innerHTML = `
                <td class="pair-name">${row.pair}</td>
                <td class="${isExtremeRSI(row.rsiBreakout) ? 'highlight-rsi-extreme' : ''}">${row.rsiBreakout}</td>
                <td class="${isExtremeRanking(row.currencyStrength) ? 'highlight-extreme-ranking' : ''}">${row.currencyStrength}</td>
                <td class="${isExtremeRanking(row.cciStrength) ? 'highlight-extreme-ranking' : ''}">${row.cciStrength}</td>
                <td class="${isExtremeRanking(row.bbPercent) ? 'highlight-extreme-ranking' : ''}">${row.bbPercent}</td>
                <td class="${isExtremeRanking(row.overallRanking) ? 'highlight-extreme-ranking' : ''}">${row.overallRanking}</td>
                <td class="${confidenceClass}">${medal}${row.confidence}%</td>
                <td><span class="${entryClass}">${entrySignal}</span></td>
                <td><span class="${getTriggerClass(row.trigger)}">${formatTriggerDisplay(row.trigger, row.triggerReason)}</span></td>
            `;
            tbody.appendChild(tr);
        });
    }

    // Add this helper function for trigger styling
    function getTriggerClass(trigger) {
        if (trigger === 'ON') return 'trigger-on';
        return 'trigger-off';
    }

    function getTriggerReasonText(reasonCode) {
        const reasonMap = {
            'T_1': 'EMAæˆ»ã‚Š',
            'T_2': 'RSIæ¥µå€¤', 
            'T_3': 'RSIæˆ»ã‚Š',
            'NONE': 'ãªã—',
            'None': 'ãªã—'
        };
        return reasonMap[reasonCode] || reasonCode;
    }

    function formatTriggerDisplay(trigger, reasonCode) {
        if (trigger === 'OFF') {
            return 'OFF';
        } else if (trigger === 'ON') {
            return `ON | ${getTriggerReasonText(reasonCode)}`;
        }
        return trigger;
    }
    
    // Convert Buy/Sell signal to Japanese direction
    function getDirectionFromSignal(signal) {
        if (signal === 'Buy') return 'ä¸Šæ–¹å‘å‚¾å‘';
        if (signal === 'Sell') return 'ä¸‹æ–¹å‘å‚¾å‘';
        return 'ä¸­ç«‹å‚¾å‘';
    }

    // Get entry signal from ranking (fallback)
    function getEntrySignalFromRanking(ranking) {
        const parts = ranking.split('/');
        const leftNumber = parseInt(parts[0]);
        const rightNumber = parseInt(parts[1]);
        if (leftNumber > rightNumber) return 'Buy';
        if (leftNumber < rightNumber) return 'Sell';
        return 'Hold';
    }

    // Check if ranking is extreme based on current data source
    function isExtremeRanking(value) {
        if (currentDataSource === '28pair') {
            return value === '1/8' || value === '8/1';
        } else if (currentDataSource === '10pair') {
            return value === '1/5' || value === '5/1';
        }
        return false;
    }

    // Check if RSI is extreme (>70 or <30)
    function isExtremeRSI(value) {
        return value >= 70 || value <= 30;
    }

    // Get top 3 confidence values with medals
    function getTop3ConfidenceWithMedals() {
        const confidenceValues = processedTableData
            .map(item => item.confidence)
            .sort((a, b) => b - a)
            .slice(0, 3);
        
        const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];
        const result = {};
        
        confidenceValues.forEach((confidence, index) => {
            result[confidence.toString()] = medals[index] || '';
        });
        
        return result;
    }

    // Refresh data function
    function refreshData() {
        console.log('Refreshing forex data...');
        loadForexData();
    }

    // Auto-refresh at specific times
    function startAutoRefreshAt05(runNow = false) {
        if (runNow) refreshData();

        function scheduleNext() {
            const now = new Date();
            const next = new Date(now);

            // Set to next :05 mark
            next.setHours(now.getMinutes() < 5 ? now.getHours() : now.getHours() + 1);
            next.setMinutes(5, 0, 0);

            const delay = next - now;

            refreshTimer = setTimeout(() => {
                refreshData();
                scheduleNext();
            }, delay);
        }

        scheduleNext();
        console.log('Auto-refresh scheduled at every HH:05');
    }

    // File update checker
    async function checkForUpdates() {
        try {
            const fileName = `fx_signals_${currentDataSource}.json`;
            const response = await fetch(`./${fileName}?` + new Date().getTime());
            if (response.ok) {
                const data = await response.json();
                const newDataString = JSON.stringify(data);
                const currentDataString = JSON.stringify({forexData});
                
                if (newDataString !== currentDataString) {
                    console.log(`${fileName} updated, refreshing data...`);
                    loadForexData();
                }
            }
        } catch (error) {
            console.log('Update check failed:', error.message);
        }
    }

    function startUpdateChecker() {
        setInterval(checkForUpdates, 300000); // 5 minutes
        console.log('Update checker started (every 5 minutes)');
    }

    // Initialize everything when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
        console.log('Initializing FX Analysis Tool...');
        
        // Load default data (28pair)
        loadForexData();
        startAutoRefreshAt05();
        startUpdateChecker();
    });
    
    // Helper function to extract date and time from image filename
    function getImageTitle(imageSrc) {
        try {
            // Extract filename from path: images/[2025_08_28][0000].png
            const filename = imageSrc.split('/').pop();
            const match = filename.match(/\[(\d{4})_(\d{2})_(\d{2})\]\[(\d{4})\]/);
            
            if (match) {
                const [, year, month, day, time] = match;
                
                // Convert month and day to Japanese format
                const monthDay = `${parseInt(month)}æœˆ${parseInt(day)}æ—¥`;
                
                // Convert time to hour format
                const hour = parseInt(time.substring(0, 2));
                const timeStr = `${hour}:00`;
                
                return `${monthDay}, ${timeStr} ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã—ã¦ã‹ã‚‰240æ™‚é–“åˆ†ã®ãƒãƒ£ãƒ¼ãƒˆç”»åƒ`;
            }
        } catch (error) {
            console.log('Could not parse image filename:', imageSrc);
        }
        
        // Fallback title if parsing fails
        return 'ãƒãƒ£ãƒ¼ãƒˆç”»åƒ';
    }

    // Alert box style modal functionality for chart images
    function showModal(imageSrc) {
        // Remove existing modal if present
        const existingModal = document.getElementById('alertModal');
        if (existingModal) {
            existingModal.remove();
        }
        
        // Create modal container
        const modal = document.createElement('div');
        modal.id = 'alertModal';
        modal.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        `;
        
        // Create alert box container
        const alertBox = document.createElement('div');
        alertBox.style.cssText = `
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            max-width: 90vw;
            max-height: 90vh;
            position: relative;
            animation: slideIn 0.3s ease;
            overflow: hidden;
        `;
        
        // Create header with close button
        const header = document.createElement('div');
        header.style.cssText = `
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        `;
        
        const title = document.createElement('h3');
        title.textContent = getImageTitle(imageSrc);
        title.style.cssText = `
            margin: 0;
            font-size: 1.1rem;
            color: #333;
            font-weight: 600;
        `;
        
        const closeButton = document.createElement('button');
        closeButton.innerHTML = 'Ã—';
        closeButton.style.cssText = `
            background: none;
            border: none;
            font-size: 24px;
            color: #666;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        `;
        
        closeButton.onmouseover = () => {
            closeButton.style.backgroundColor = '#e9ecef';
            closeButton.style.color = '#000';
        };
        
        closeButton.onmouseout = () => {
            closeButton.style.backgroundColor = 'transparent';
            closeButton.style.color = '#666';
        };
        
        closeButton.onclick = closeModal;
        
        header.appendChild(title);
        header.appendChild(closeButton);
        
        // Create image container
        const imageContainer = document.createElement('div');
        imageContainer.style.cssText = `
            padding: 20px;
            text-align: center;
            background: white;
        `;
        
        // Create image element
        const img = document.createElement('img');
        img.src = imageSrc;
        img.alt = 'ãƒãƒ£ãƒ¼ãƒˆç”»åƒ';
        img.style.cssText = `
            max-width: 100%;
            max-height: 70vh;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        `;
        
        // Handle image load error
        img.onerror = () => {
            img.style.display = 'none';
            const errorMsg = document.createElement('div');
            errorMsg.textContent = 'ç”»åƒã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸ';
            errorMsg.style.cssText = `
                color: #dc3545;
                padding: 40px;
                font-size: 1.1rem;
            `;
            imageContainer.appendChild(errorMsg);
        };
        
        imageContainer.appendChild(img);
        
        // Assemble the alert box
        alertBox.appendChild(header);
        alertBox.appendChild(imageContainer);
        modal.appendChild(alertBox);
        
        // Add to document
        document.body.appendChild(modal);
        
        // Close modal when clicking outside the alert box
        modal.onclick = function(event) {
            if (event.target === modal) {
                closeModal();
            }
        };
        
        // Add CSS keyframes for animations
        if (!document.getElementById('modalAnimations')) {
            const style = document.createElement('style');
            style.id = 'modalAnimations';
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideIn {
                    from { 
                        opacity: 0;
                        transform: translateY(-20px) scale(0.95);
                    }
                    to { 
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
            `;
            document.head.appendChild(style);
        }
    }

    function closeModal() {
        const modal = document.getElementById('alertModal');
        if (modal) {
            modal.style.animation = 'fadeOut 0.2s ease';
            setTimeout(() => {
                modal.remove();
            }, 200);
        }
    }

    // Close modal with Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeModal();
        }
    });

    // Add fadeOut animation
    const existingStyle = document.getElementById('modalAnimations');
    if (existingStyle) {
        existingStyle.textContent += `
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
    }

    // Function to detect Win/Lose from image filename and apply frame styling
    function getFrameClass(imageSrc) {
        if (imageSrc.includes('[Win]')) {
            return 'win-frame';
        } else if (imageSrc.includes('[Lose]')) {
            return 'lose-frame';
        }
        return '';  // No special frame for regular images
    }

    // Function to apply Win/Lose frames to all chart thumbnails
    function applyWinLoseFrames() {
        const thumbnails = document.querySelectorAll('.chart-thumbnail');
        thumbnails.forEach(img => {
            const frameClass = getFrameClass(img.src);
            if (frameClass) {
                img.classList.add(frameClass);
            }
        });
    }

    // Call this function after the DOM is loaded and whenever images are updated
    document.addEventListener('DOMContentLoaded', () => {
        // Apply frames after page loads
        setTimeout(applyWinLoseFrames, 100);
    });
    
    // Date array for verification results table - edit this array directly
    const verificationDates = [
        '2025_08_28',
        '2025_08_29', 
        '2025_09_01',
        '2025_09_02',
        '2025_09_03',
        '2025_09_04',
        '2025_09_05',
        '2025_09_08',  // Change this to '2025_09_06' if needed
        '2025_09_09',
        '2025_09_10'
    ];

    // Time slots for the verification table (24 hours)
    const timeSlots = [
        '0:00', '1:00', '2:00', '3:00', '4:00', '5:00',
        '6:00', '7:00', '8:00', '9:00', '10:00', '11:00',
        '12:00', '13:00', '14:00', '15:00', '16:00', '17:00',
        '18:00', '19:00', '20:00', '21:00', '22:00', '23:00'
    ];

    // Function to format date for display (convert 2025_08_28 to 8æœˆ28æ—¥)
    function formatDateForDisplay(dateString) {
        const [year, month, day] = dateString.split('_');
        return `${parseInt(month)}æœˆ${parseInt(day)}æ—¥`;
    }

    // Function to format time for filename (convert "0:00" to "0000")
    function formatTimeForFilename(timeString) {
        const hour = timeString.split(':')[0];
        return hour.padStart(2, '0') + '00';
    }

    // Function to generate table header
    function generateTableHeader() {
        let headerHTML = '<tr><th style="text-align: center;">ã‚¨ãƒ³ãƒˆãƒªãƒ¼</th>';
        
        verificationDates.forEach(date => {
            const displayDate = formatDateForDisplay(date);
            headerHTML += `<th style="text-align: center;">${displayDate}</th>`;
        });
        
        headerHTML += '</tr>';
        return headerHTML;
    }

    // Function to generate table body
    function generateTableBody() {
        let bodyHTML = '';
        
        timeSlots.forEach(time => {
            bodyHTML += `<tr><td>${time}</td>`;
            
            verificationDates.forEach(date => {
                const timeFormatted = formatTimeForFilename(time);
                const imagePath = `images/[${date}][${timeFormatted}].png`;
                
                bodyHTML += `
                    <td onclick="showModal('${imagePath}')">
                        <img src="${imagePath}" alt="ãƒãƒ£ãƒ¼ãƒˆç”»åƒ" class="chart-thumbnail">
                    </td>
                `;
            });
            
            bodyHTML += '</tr>';
        });
        
        return bodyHTML;
    }

    // Function to generate and update verification results table
    function generateVerificationTable() {
        const tableContainer = document.querySelector('#results .table-container table');
        
        if (tableContainer) {
            const thead = tableContainer.querySelector('thead');
            const tbody = tableContainer.querySelector('tbody');
            
            if (thead) {
                thead.innerHTML = generateTableHeader();
            }
            
            if (tbody) {
                tbody.innerHTML = generateTableBody();
                
                // Apply Win/Lose frames after generating the table
                setTimeout(() => {
                    applyWinLoseFrames();
                }, 100);
            }
        }
    }

    // Initialize the table when the page loads
    document.addEventListener('DOMContentLoaded', () => {
        // Wait a bit for the page to fully load
        setTimeout(() => {
            generateVerificationTable();
        }, 500);
    });
    // Export functions for external use
    window.ForexDataManager = {
        refresh: refreshData,
        getData: () => processedTableData,
        getRawData: () => forexData,
        loadFromFile: loadForexData,
        switchView: switchPairView,
        getCurrentView: () => currentDataSource
    };
    </script>
</body>
</html>